<p>Input:<br><textarea id="input" rows="10" cols="80"></textarea>
<p><button onclick="process()">Process</button>
<p>Output:<br><textarea id="output" rows="10" cols="80"></textarea>

<script>

function process() {
  x = document.getElementById("input").value
  array = x.split(" ")
  vowels = ["a", "e", "i", "o", "u", "A", "E", "I", "O", "U"]
  consonants = ["b", "c", "d", "f", "g", "h", "j", "k", "l", "m", "n", "p", "q", "r", "s", "t", "v", "w", "x", "y", "z"]
  for(i=0; i<array.length; i++){
    if(array[i] === "a") {
	   for(j=0; j<vowels.length; j++){
	       if(vowels[j] === array[i+1].charAt(0)){
		     array[i] = "an"
		   }
		 }
	  }
	if(array[i] === "A") {
	   for(j=0; j<vowels.length; j++){
	       if(vowels[j] === array[i+1].charAt(0)){
		     array[i] = "An"
		   }
		 }
	  }
	if(array[i] === "an") {
	   for(k=0; k<consonants.length; k++){
	       if(consonants[k] === array[i+1].charAt(0)){
		     array[i] = "a"
		   }
		 }
	  }
	if(array[i] === "An") {
	   for(k=0; k<consonants.length; k++){
	       if(consonants[k] === array[i+1].charAt(0)){
		     array[i] = "A"
		   }
		 }
	  }
    }
  y = array.join(" ")
  document.getElementById("output").value = y
}

</script>